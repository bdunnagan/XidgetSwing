<?xml version="1.0" encoding="UTF-8"?>

<script>
  <package>org.xidget.swing.xaction</package>
  
  <create collection="layouts">
    <template>
      <layouts>
        <layout name="l1">
          <package>org.xidget.layout.xaction</package>
          
          <for source="components/*[ not( layout)]">
            <assign name="previous">preceding-sibling::*[ 1]</assign>
            <attach when="not( $previous)">
              <x0 attach="../.." side="x0" pad="5"/>
              <x1 attach="../.." side="x1" pad="5"/>            
              <y0 attach="../.." side="y0" pad="5"/>
            </attach>
            <attach when="$previous">
              <x0 attach="../.." side="x0" pad="5"/>
              <x1 attach="../.." side="x1" pad="5"/>            
              <y0 attach="$previous" side="y1" pad="5"/>
            </attach>
            <attach when="@id = '1'">
              <x0 attach="../.." side="x0" pad="5"/>
              <x1 attach="../.." side="x1" percent=".33"/>            
              <y0 attach="../.." side="y0" pad="5"/>
            </attach>
            <attach when="@id = '2'">
              <x1 attach="../.." side="x1" pad="5"/>            
              <y0 attach="$previous" side="y0"/>
            </attach>
            <attach when="@id = '2'">
              <x0 attach="$previous" side="x1" pad="5"/>
            </attach>
          </for>
          <!--attach>
            <x1 attach="components/text[ @id = '3']" side="x1" pad="5"/>
            <y1 attach="components/text[ @id = '3']" side="y1" pad="5"/>
          </attach-->
        </layout>
      </layouts>
    </template>
  </create>
  
  <create assign="form">
    <template>
      <form layout="collection('layouts')/layout[ 1]">
        <components>
          <text id="1" size="100,1">
            <source>collection('appdb')/text1</source>
          </text>

          <text id="2" size="100,1">        
            <source>collection('appdb')/text2</source>
          </text>
          
              <text size="100,1">        
                <source>collection('appdb')/text3</source>
              </text>
        </components>        
          
        <trigger name="Listen" source="collection('appdb')/text2">
          <print>string( collection('appdb')/text2)</print>
        </trigger>
      </form>
    </template>
  </create>
  
  <create collection="appdb">
    <template>
      <appdb>
        <text1>Time and a Word</text1>
        <text2>Relayer</text2>
        <text3>Close to the Edge</text3>
      </appdb>
    </template>
  </create>
  
  <xidget>$form</xidget>
</script>
