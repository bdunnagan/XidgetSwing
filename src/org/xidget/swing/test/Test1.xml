<?xml version="1.0" encoding="UTF-8"?>

<script>
  <package>org.xidget.xaction</package>
  
  <create collection="xml">
    <template annotated="true">
      <xml path=".">
        <extern:cache class="org.xmodel.external.caching.FileSystemCachingPolicy"/>
      </xml>
    </template>
  </create>

  <assign name="layouts">collection('xml')/layouts.xml/layouts</assign>  
  <create assign="form">
    <template>
      <application>
        <!-- setting the size doesn't work here because there is no dependency on form.y1 -->
        <form size="600, 200" layout="$layouts/layout[ @id = 'vertical']">
          <text id="1">
            <label>Text1</label>
            <source>collection('appdb')/text1</source>
          </text>
  
          <combo id="2" size="50,1">
            <choices>
              <choice>Choice 1</choice>
              <choice>Choice 2</choice>
              <choice>Choice 3</choice>
            </choices>        
            <source>collection('appdb')/text2</source>
          </combo>
          
          <!--text id="3" size="50,1">        
            <label>Text3</label>
            <source>collection('appdb')/text3</source>
          </text-->
            
          <trigger name="Listen" source="collection('appdb')/text2">
            <print>string( collection('appdb')/text2)</print>
          </trigger>
        </form>
      </application>
    </template>
  </create>
  
  <create collection="appdb">
    <template>
      <appdb>
        <text1>Time and a Word</text1>
        <text2>Relayer</text2>
        <text3>Close to the Edge</text3>
      </appdb>
    </template>
  </create>
  
  <xidget>$form</xidget>
</script>
