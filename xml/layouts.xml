<?xml version="1.0" encoding="UTF-8"?>

<layouts>
  <package>org.xidget.layout.xaction</package>
  
  <vfree>
    <assign name="xidgets">*[ @xidget]</assign>
    <assign name="n">count( $xidgets)</assign>

    <for assign="xidget" source="$xidgets">
      <attach xidget="$xidget">
        <left constant="0"/>
        <right offset="0"/>
      </attach>
    </for>
    
    <attach xidget="$xidgets[ 1]">
      <top constant="0"/>
    </attach>
        
    <for assign="i" from="2" to="$n+1" by="1">
      <attach xidget="$xidgets[ $i]">
        <top attach="$xidgets[ $i - 1]" anchor="bottom" offset="$spacing"/>
      </attach>  
    </for>
    
    <attach xidget=".">
      <height attach="$xidgets[ $n]" anchor="bottom" offset="0"/>
    </attach>
  </vfree>
    
  <vgrid>
    <assign name="xidgets">*[ @xidget]</assign>
    <assign name="n">count( $xidgets)</assign>
    <assign name="before">if ($n &gt; 1) then ($spacing div 2) else (0)</assign>
    <assign name="after">$spacing - $before</assign>
    
    <for assign="i" from="1" to="$n+1" by="1">
      <attach xidget="$xidgets[ $i]">
        <top percent="($i - 1) div $n" offset="if ($i &gt; 1) then $after else 0"/>
        <left constant="0"/>
        <right offset="0"/>
        <bottom percent="$i div $n" offset="if ($i &lt; $n) then -$before else 0"/>
      </attach>
    </for>
  </vgrid>
  
  <hfree>
    <assign name="xidgets">*[ @xidget]</assign>
    <assign name="n">count( $xidgets)</assign>

    <for assign="xidget" source="$xidgets">
      <attach xidget="$xidget">
        <top constant="0"/>
        <bottom offset="0"/>
      </attach>
    </for>
    
    <attach xidget="$xidgets[ 1]">
      <left constant="0"/>
    </attach>
        
    <for assign="i" from="2" to="$n+1" by="1">
      <attach xidget="$xidgets[ $i]">
        <left attach="$xidgets[ $i - 1]" anchor="right" offset="$spacing"/>
      </attach>  
    </for>
    
    <attach xidget=".">
      <width attach="$xidgets[ $n]" anchor="right" offset="0"/>
    </attach>
  </hfree>
    
  <hgrid>
    <assign name="xidgets">*[ @xidget]</assign>
    <assign name="n">count( $xidgets)</assign>
    <assign name="before">if ($n &gt; 1) then ($spacing div 2) else (0)</assign>
    <assign name="after">$spacing - $before</assign>
    
    <for assign="i" from="1" to="$n+1" by="1">
      <attach xidget="$xidgets[ $i]">
        <top constant="0"/>
        <left percent="($i - 1) div $n" offset="if ($i &gt; 1) then $after else 0"/>
        <right percent="$i div $n" offset="if ($i &lt; $n) then -$before else 0"/>
        <bottom offset="0"/>
      </attach>
    </for>
  </hgrid>
</layouts>